---
title: mulvus相关知识
date: 2023-10-26 10:35:19
updated: 2023-11-10 10:35:19
tags:
  - mulvus
categories:
  - notes
---

# 参考资料

https://www.bilibili.com/video/BV11a4y1c7SW/?spm_id_from=333.880.my_history.page.click

https://milvus.io/

# 向量

给定一个数据，提取其多维度的特征，这些维度中的特征共同组成了该数据在坐标系中的坐标点，从原点指向数据坐标点的带有方向和大小的数据称为向量，一个向量即可在一个坐标系中表示一个数据

向量之间的最近距离可以反应数据的相似程度，从而可以搜索给定数据的近似数据，类似的应用如"以图搜图", 

向量数据库的应用便是,给定一个查询向量,从数据库中找到与查询数据最为相似的一些向量,具有一定模糊性

# 最近邻

- 暴力搜索/平坦搜索：给定向量与所有数据库中向量进行比较，搜索质量完美，时间过长

## 减小搜索范围

- 聚类
    - 先对数据库中数据使用聚类算法分类，在与查询向量最近的类中查询近似向量
- 位置敏感哈希
    - 增大哈希碰撞的可能性，用于分桶，桶作为查询范围
    - 对哈希值进行分段分桶

# 内存开销

## 乘积量化

用聚类的中心也叫质心来代替这个范围的向量，会丢失向量的具体值，但可以省去内存开销

给每个类的质心进行编码，创建一张编码与质心坐标的映射表

将完整向量拆成多个部分比如16维拆成4个4维，分别进行聚类，减小码本的开销

# 搜索速度

## NSW导航小世界

用于查询，先用长距离快速接近，再用短距离精确查找

## HNSW分层导航小世界

类似于跳表



# gpt与milvus的应用

## 作为资料库

​	比如把一些文档提取成向量存入milvus，在提问时首先从milvus中提取出相关的文档，接着将问题和提取出的文档一起喂给gpt，gpt给出回答。

![image-20231027180505934](mulvus相关知识/image-20231027180505934.png)

## 作为cache

milvus中存储过往与gpt的聊天记录，如果当前问题在milvus中可以找到相似的记录，则直接返回聊天记录中gpt的回答，这样可以节省接口调用成本