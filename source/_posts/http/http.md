---
title: http
date: 2023-11-05 09:16:19
updated: 2023-11-05 10:35:19
tags:
  - http
categories:
  - 笔记
---

# 超文本传输协议

当前已有http2和http3，但通常使用的都是http1.1

# 定义

## 交互

- 客户端和服务端交互的方式
    - 请求 客户端向服务端发送
    - 响应 服务端向客户端响应
- 客户端和服务端交互的数据格式
    - 请求报文
        - 请求行
        - 请求头
        - 请求体
    - 响应报文
        - 响应行
        - 响应头
        - 响应体

## 长连接和短连接

http协议底层为tcp/ip协议支持，tcp是面向连接的协议。

短连接：每次获取资源都重新建立tcp连接，资源获取到后关闭连接（http 1.0）

长连接：第一次获取资源建立tcp连接，接着保持连接开启，直到资源获取完毕将连接关闭(http 1.1)

## 缓存

客户端会将获取过的文件先进行缓存，下次先看缓存（http 1.1）

# 请求报文

- 请求行

    - 请求方式（GET/POST……）
    - 请求路径（/hello/……）
    - 请求协议（HTTP/1.1）

- 请求头

    key-value格式

    常见头

    - Host: 127.0.0.1:8080 // 服务器的ip和端口号
    - Connection: keep-alive // 长连接
    - Upgade-Insecure-Reqiests: 1 // 请求协议自动升级成https
    - User-Agent: …… // 客户端系统信息
    - Accept: text/html // 浏览器支持什么样的文件
    - Referer: http://…… // 重定向的上一个页面
    - Accept-Encoding: gzip…… // 浏览器支持的压缩格式
    - Accept-Language: zh-CN // 浏览器支持的语言

- 空行

- 请求体

# 响应报文

- 响应行

    - 协议（HTTP/1.1）
    - 状态码 200
    - 响应状态描述 OK（新版tomcat一些状态码会省略）

- 响应头

    key-value格式

    常见头

    - Keep-Alive: timeout-20 // 多长时间超时，期间内不发送请求则认为超时

    - Connection: keep-alive // 长连接
    - Content-Type: text/html // 响应体的类型
    - Content-Length: 4473 // 响应体大小
    - Accept-Ranges: bytes //  服务器可以处理范围请求

- 响应体

# 响应状态码

HTTP响应报文的状态码有五种，包括：

1. 1xx：信息响应，表示收到请求并继续处理。
2. 2xx：成功响应，表示请求已被服务器接收、理解并接受。
3. 3xx：重定向响应，要完成请求必须进一步执行的动作。
4. 4xx：客户端错误响应，请求包含语法错误或者无法完成请求。
5. 5xx：服务器错误响应，服务器在处理请求的过程中发生了错误。

其中，常见状态码包括：

1. 200 OK：表示从客户端发送给服务器的请求被正常处理并返回。
2. 301 Moved Permanently：永久性重定向，表示请求的资源被分配了新的 URL，之后应使用更改的 URL。
3. 302 Found：临时性重定向，表示请求的资源被分配了新的 URL，希望本次访问使用新的 URL。
4. 304：使用了本地缓存
5. 400：请求参数有误
6. 404 Not Found：服务器无法找到被请求的页面。
7. 405 Not Allowed：请求的方式不被允许
8. 500 Internal Server Error：请求未完成，服务器遇到不可预知的情况。