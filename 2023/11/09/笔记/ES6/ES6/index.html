<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>ES6 | Boranget.博客</title><meta name="author" content="Boranget"><meta name="copyright" content="Boranget"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="介绍ES就是JS的原名，ES6发布于2015年 letlet与var的差别  let不能重复声明   123456789&#x2F;&#x2F; varvar j &#x3D; 10;var j &#x3D; 20;&#x2F;&#x2F; letlet i &#x3D; 10;&#x2F;&#x2F; 下面这句代码是非法的，报错i已被声明，let i &#x3D; 20;&#x2F;&#x2F; let之前如果是var先声明，则第一次let可以将其覆盖&#x2F;&#x2F; var之前如果let已经声明，则会报错  let有块级作">
<meta property="og:type" content="article">
<meta property="og:title" content="ES6">
<meta property="og:url" content="https://boranget.github.io/2023/11/09/%E7%AC%94%E8%AE%B0/ES6/ES6/index.html">
<meta property="og:site_name" content="Boranget.博客">
<meta property="og:description" content="介绍ES就是JS的原名，ES6发布于2015年 letlet与var的差别  let不能重复声明   123456789&#x2F;&#x2F; varvar j &#x3D; 10;var j &#x3D; 20;&#x2F;&#x2F; letlet i &#x3D; 10;&#x2F;&#x2F; 下面这句代码是非法的，报错i已被声明，let i &#x3D; 20;&#x2F;&#x2F; let之前如果是var先声明，则第一次let可以将其覆盖&#x2F;&#x2F; var之前如果let已经声明，则会报错  let有块级作">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://boranget.github.io/assets/img/tx.png">
<meta property="article:published_time" content="2023-11-09T11:07:19.000Z">
<meta property="article:modified_time" content="2023-11-11T02:35:19.000Z">
<meta property="article:author" content="Boranget">
<meta property="article:tag" content="ES6">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://boranget.github.io/assets/img/tx.png"><link rel="shortcut icon" href="/assets/img/tx.png"><link rel="canonical" href="https://boranget.github.io/2023/11/09/%E7%AC%94%E8%AE%B0/ES6/ES6/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.json","preload":true,"top_n_per_article":1,"unescape":true,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'ES6',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-11-11 10:35:19'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/assets/img/tx.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">191</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">198</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Boranget.博客"><img class="site-icon" src="/assets/img/tx.png"/><span class="site-name">Boranget.博客</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">ES6</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-11-09T11:07:19.000Z" title="发表于 2023-11-09 19:07:19">2023-11-09</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-11-11T02:35:19.000Z" title="更新于 2023-11-11 10:35:19">2023-11-11</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="ES6"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>ES就是JS的原名，ES6发布于2015年</p>
<h1 id="let"><a href="#let" class="headerlink" title="let"></a>let</h1><p>let与var的差别</p>
<ul>
<li><p>let不能重复声明</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// var</span></span><br><span class="line"><span class="keyword">var</span> j = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">var</span> j = <span class="number">20</span>;</span><br><span class="line"><span class="comment">// let</span></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">10</span>;</span><br><span class="line"><span class="comment">// 下面这句代码是非法的，报错i已被声明，</span></span><br><span class="line"><span class="keyword">let</span> i = <span class="number">20</span>;</span><br><span class="line"><span class="comment">// let之前如果是var先声明，则第一次let可以将其覆盖</span></span><br><span class="line"><span class="comment">// var之前如果let已经声明，则会报错</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>let有块级作用域，即使是非函数的花括号范围，使用let在其中定义的变量也只能在其中访问</p>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="keyword">var</span> ii = <span class="number">19</span>;</span><br><span class="line">    <span class="keyword">let</span> ik = <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ii);</span><br><span class="line"><span class="comment">// 报错ik未定义</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(ik);</span><br></pre></td></tr></table></figure>
</li>
<li><p>let不会预解析进行变量提升</p>
<p>  没有声明之前先访问，var会将改变量赋值为undefind，let会报错（not defind）</p>
</li>
<li><p>let定义的全局变量不会作为window的属性</p>
<p>  var 一个变量的时候，改变量会变为window对象的属性</p>
</li>
<li><p>let在es6中推荐使用</p>
</li>
</ul>
<h1 id="const"><a href="#const" class="headerlink" title="const"></a>const</h1><p>特性与let相同，除此以外</p>
<ul>
<li>定义出的变量为常量</li>
<li>必须在声明时赋值</li>
</ul>
<h1 id="模板字符串"><a href="#模板字符串" class="headerlink" title="模板字符串"></a>模板字符串</h1><p>解决换行和字符串拼接复杂问题</p>
<ul>
<li>以 &#96;&#96; 号包裹</li>
<li>可通过${}填入变量</li>
<li>注意变量需要在模板字符串之前定义并赋值，且模板字符串之后再去更改变量，模板字符串的内容并不会更新</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> you = <span class="string">&quot;ES6&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> a = </span><br><span class="line"><span class="string">`你好</span></span><br><span class="line"><span class="string">    <span class="subst">$&#123;you&#125;</span>`</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>你好<br>    ES6</p>
</blockquote>
<h1 id="解构表达式"><a href="#解构表达式" class="headerlink" title="解构表达式"></a>解构表达式</h1><h2 id="解构数组"><a href="#解构数组" class="headerlink" title="解构数组"></a>解构数组</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>];</span><br><span class="line"><span class="comment">// 其中，c和f都定义了默认值，但是c可以从arr中找到13来赋值，</span></span><br><span class="line"><span class="comment">// f由于没有匹配的值所以会使用默认值16</span></span><br><span class="line"><span class="comment">// g由于没有给默认值且找不到对应的值，其值最终为undefind</span></span><br><span class="line"><span class="keyword">let</span> [a, b, c=<span class="number">4</span>, d, e, f=<span class="number">16</span>, g] = arr; </span><br></pre></td></tr></table></figure>

<h2 id="解构对象"><a href="#解构对象" class="headerlink" title="解构对象"></a>解构对象</h2><p>需要解构变量名与对象中的属性名一致</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;zhangsan&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">15</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;name, age&#125; = person;</span><br></pre></td></tr></table></figure>

<p>连续结构赋值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">    <span class="attr">a</span>:&#123;</span><br><span class="line">        <span class="attr">b</span>:&#123;</span><br><span class="line">            <span class="attr">c</span>: <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:&#123;c&#125;&#125;&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(c)</span><br><span class="line"><span class="comment">// 同时重命名</span></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">a</span>:&#123;<span class="attr">b</span>:&#123;<span class="attr">c</span>:name&#125;&#125;&#125; = obj</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(name)</span><br></pre></td></tr></table></figure>



<h2 id="形参解构"><a href="#形参解构" class="headerlink" title="形参解构"></a>形参解构</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">arrjg</span>(<span class="params">[a,b,c,d,e=<span class="number">10</span>]</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c,d,e);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 2 3 4 10</span></span><br><span class="line"><span class="title function_">arrjg</span>(arr);</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="string">&quot;zhangsan&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="number">15</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">objectjg</span>(<span class="params">&#123;name,age&#125;</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(name,age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// zhangsan 15</span></span><br><span class="line"><span class="title function_">objectjg</span>(person);</span><br></pre></td></tr></table></figure>

<h1 id="扩展运算符"><a href="#扩展运算符" class="headerlink" title="扩展运算符"></a>扩展运算符</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 拼接数组或对象</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line"><span class="keyword">const</span> arr2 = [...arr, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用展开运算符克隆一个对象，是浅复制</span></span><br><span class="line"><span class="keyword">const</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span> ,<span class="attr">c</span>:&#123;<span class="attr">name</span>:<span class="string">&#x27;zhangsan&#x27;</span>&#125;&#125;;</span><br><span class="line"><span class="keyword">const</span> newObj = &#123; ...obj&#125;;</span><br><span class="line">obj.<span class="property">c</span>.<span class="property">name</span>=<span class="string">&quot;lisi&quot;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newObj);<span class="comment">// newObj的c.name为lisi</span></span><br><span class="line"><span class="comment">// 复制的同时还可以修改属性或者添加属性</span></span><br><span class="line"><span class="keyword">const</span> newObj = &#123; ...obj, <span class="attr">a</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newObj); <span class="comment">// newObj的属性a被修改了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 批量形参</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">sum</span> = (<span class="params">...args</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> args.<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a + b, <span class="number">0</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> res = <span class="title function_">sum</span>(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br></pre></td></tr></table></figure>



<h1 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h1><p>与java中lambda几乎相同</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fun1 = <span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun2</span> = (<span class="params"></span>)=&gt;&#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun3</span> = (<span class="params">x,y</span>) =&gt; x+y;</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">fun4</span> = x =&gt; <span class="variable language_">console</span>.<span class="title function_">log</span>(x);</span><br></pre></td></tr></table></figure>

<h2 id="this问题"><a href="#this问题" class="headerlink" title="this问题"></a>this问题</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">    <span class="attr">f1</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">f2</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">f3</span>:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(name);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">f4</span>:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 除f2可输出张三，其余都输出了空</span></span><br><span class="line"><span class="comment">// 1和3是因为方法中直接获取到的只能是参数列表中的值理解</span></span><br><span class="line"><span class="comment">// 4是因为箭头函数没有自己的this</span></span><br><span class="line">person.<span class="title function_">f1</span>();person.<span class="title function_">f2</span>();person.<span class="title function_">f3</span>();person.<span class="title function_">f4</span>();</span><br></pre></td></tr></table></figure>

<p>箭头函数的this是其外层所处的上下文的环境中的this，如上案例中，箭头函数中的this并不是person的this，因为person只是其外层，箭头函数中的this还需要往外找person所处的上下文。</p>
<p>在实际测试中，在对象里包着的lambda的this都是window ，在方法中嵌套的普通方法的this为window，在方法中嵌套的箭头函数满足以上规则。</p>
<p>由于this传递，甚至可以一直用箭头函数嵌套传递</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;张三&quot;</span>,</span><br><span class="line">        <span class="attr">f3</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">            <span class="keyword">let</span> <span class="title function_">f4</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">                <span class="keyword">let</span> <span class="title function_">f4</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">                    <span class="keyword">let</span> <span class="title function_">f4</span> = (<span class="params"></span>)=&gt;&#123;</span><br><span class="line">                        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">name</span>);</span><br><span class="line">                    &#125;;</span><br><span class="line">                    <span class="title function_">f4</span>();</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="title function_">f4</span>();</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="title function_">f4</span>();</span><br><span class="line">        &#125;, </span><br><span class="line">&#125;</span><br><span class="line">person.<span class="title function_">f3</span>();</span><br></pre></td></tr></table></figure>

<h1 id="rest"><a href="#rest" class="headerlink" title="rest"></a>rest</h1><p><strong>相当于Java中的可变参数</strong></p>
<p>由于参数长度不定，可变参只能有一个且必须在最后一位</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">f</span> = (<span class="params">a,b,c,...d</span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c,d);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 1 2 3 (5) [4, 5, 6, 7, 8]</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>);</span><br></pre></td></tr></table></figure>

<h1 id="spread"><a href="#spread" class="headerlink" title="spread"></a>spread</h1><p><strong>相当于实参用rest</strong></p>
<p>就是把数组拆开后放到了参数列表中</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title function_">f</span> = (<span class="params">a,b,c</span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="comment">// 1 2 3</span></span><br><span class="line"><span class="title function_">f</span>(...arr);</span><br><span class="line"><span class="keyword">let</span> <span class="title function_">f</span> = (<span class="params">a,b,c</span>)=&gt;&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(a,b,c);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="comment">// 6 1 2</span></span><br><span class="line"><span class="title function_">f</span>(<span class="number">6</span>,...arr);</span><br></pre></td></tr></table></figure>

<p><strong>spread用来合并数组</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>];</span><br><span class="line"><span class="keyword">let</span> arr3 = [<span class="number">0</span>,...arr1,<span class="number">3.5</span>,...arr2,<span class="number">7</span>];</span><br><span class="line"><span class="comment">// (9) [0, 1, 2, 3, 3.5, 4, 5, 6, 7]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(arr3)</span><br></pre></td></tr></table></figure>

<p><strong>spread用于合并对象</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name=&#123;<span class="attr">name</span>:<span class="string">&quot;张三&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> age=&#123;<span class="attr">age</span>:<span class="number">10</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> gender=&#123;<span class="attr">gender</span>:<span class="string">&quot;boy&quot;</span>&#125;;</span><br><span class="line"><span class="keyword">let</span> person = &#123;...name,...age,...gender&#125;;</span><br><span class="line"><span class="comment">// &#123;name: &#x27;张三&#x27;, age: 10, gender: &#x27;boy&#x27;&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(person);</span><br></pre></td></tr></table></figure>

<h1 id="面向对象的语法糖"><a href="#面向对象的语法糖" class="headerlink" title="面向对象的语法糖"></a>面向对象的语法糖</h1><h2 id="类的定义"><a href="#类的定义" class="headerlink" title="类的定义"></a>类的定义</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 定义成员变量</span></span><br><span class="line">    name;</span><br><span class="line">    age;</span><br><span class="line">    <span class="comment">// 实例方法</span></span><br><span class="line">    <span class="title function_">eat</span>(<span class="params">food</span>)&#123;</span><br><span class="line">        <span class="comment">// 注意这里必须是this.才能取到值</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁的<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>在吃<span class="subst">$&#123;food&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 静态方法</span></span><br><span class="line">    <span class="keyword">static</span> <span class="title function_">add</span>(<span class="params">a,b</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(a+b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建实例"><a href="#创建实例" class="headerlink" title="创建实例"></a>创建实例</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br></pre></td></tr></table></figure>

<h2 id="给对象的属性赋值"><a href="#给对象的属性赋值" class="headerlink" title="给对象的属性赋值"></a>给对象的属性赋值</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="property">name</span>=<span class="string">&quot;张三&quot;</span>;</span><br><span class="line">p.<span class="property">age</span>=<span class="number">15</span>;</span><br></pre></td></tr></table></figure>

<h2 id="实例方法的定义方式"><a href="#实例方法的定义方式" class="headerlink" title="实例方法的定义方式"></a>实例方法的定义方式</h2><p>类中实例方法有两种定义方式，一种是直接定义，一种是属性定义</p>
<p>直接定义的实例方法放在实例对象的原型对象上，而属性方法直接放在实例对象的上</p>
<p>如果将属性定义的方法改为箭头函数，则由于箭头函数的this会指向外层所在的this，故箭头函数中的this会指向实例对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 直接定义的实例方法放在实例对象的原型对象上</span></span><br><span class="line">    <span class="title function_">eat</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;eat&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 而属性方法直接放在实例对象的上</span></span><br><span class="line">    speak = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;speak&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// 箭头函数</span></span><br><span class="line">    speak2 = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;speak2&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p);</span><br></pre></td></tr></table></figure>

<p><img src="/2023/11/09/%E7%AC%94%E8%AE%B0/ES6/ES6/image-20240404115211061.png" alt="image-20240404115211061"></p>
<h2 id="调用实例方法"><a href="#调用实例方法" class="headerlink" title="调用实例方法"></a>调用实例方法</h2><p>在类中定义的方法被放在了类的原型对象上，供实例使用</p>
<p>在实例调用自身的实例方法时，实例方法中的this为当前实例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="title function_">eat</span>()</span><br></pre></td></tr></table></figure>

<p>但比如使用call去调用实例方法时，可以更改方法中的this指向，下面的call方法中如果使用了this，this会指向传入的<code>&#123;&quot;name&quot;:&quot;zs&quot;&#125;</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.<span class="property">eat</span>.<span class="title function_">call</span>(&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;zs&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="调用静态方法"><a href="#调用静态方法" class="headerlink" title="调用静态方法"></a>调用静态方法</h2><p>注意无法从类的实例上调用静态方法</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Person</span>.<span class="title function_">add</span>(<span class="number">1</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h2 id="get和set方法"><a href="#get和set方法" class="headerlink" title="get和set方法"></a>get和set方法</h2><p>get&#x2F;set + 空格 + 属性名</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 定义成员变量</span></span><br><span class="line">    name;</span><br><span class="line">    <span class="comment">// get &amp; set</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>()&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;get Name&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;set Name&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是在外部向对象取值或者赋值时，不会通过get或者set方法，而是会直接向属性赋值。get与set方法的触发条件为真实属性名与get后的属性名不同：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 定义成员变量</span></span><br><span class="line">    n;</span><br><span class="line">    <span class="comment">// get &amp; set</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>()&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;get Name&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">n</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;set Name&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">n</span> = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"><span class="comment">// 这样方会经过get和set方法</span></span><br><span class="line">p.<span class="property">name</span> = <span class="string">&quot;jack&quot;</span>;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(p.<span class="property">name</span>);</span><br></pre></td></tr></table></figure>

<p>虽然看似是在操作属性，但实际是在操作get与set方法：</p>
<p>在操作某个对象的属性时，首先拿着该属性名去对象中寻找是否有该属性，若有，则尝试直接操作属性，若没有，则寻找是否有对应的get&amp;set方法。</p>
<h2 id="private属性"><a href="#private属性" class="headerlink" title="private属性"></a>private属性</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 定义成员变量</span></span><br><span class="line">    #n;</span><br><span class="line">    <span class="comment">// get &amp; set</span></span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>()&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;get Name&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.#n;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;set Name&quot;</span>);</span><br><span class="line">        <span class="variable language_">this</span>.#n = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>()</span><br><span class="line"><span class="comment">// 不允许的操作</span></span><br><span class="line">p.#n = <span class="string">&quot;张三&quot;</span></span><br><span class="line"><span class="comment">// 只能通过set方法</span></span><br><span class="line">p.<span class="property">name</span> = <span class="string">&quot;张三&quot;</span></span><br></pre></td></tr></table></figure>

<p>在es6中，属性名以#开头的属性为私有属性</p>
<p>在实际测试中，发现edge浏览器可以直接赋值，但是firefox会报错</p>
<h2 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h2><p>方法名命名为constructor即可</p>
<p>构造器中的this为当前的实例对象</p>
<p>构造方法也会存放在原型链上</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 定义成员变量</span></span><br><span class="line">    name;</span><br><span class="line">    age;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">name</span> = name;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">age</span> = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">15</span>)</span><br></pre></td></tr></table></figure>

<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><p>子类在继承父类后，子类的构造器可以不写，可以直接使用父类的构造器。</p>
<p>若在子类中定义了构造器，则必须调用父类的构造器，且必须在子类构造器最开始调用</p>
<p>其实父类就是放在了子类对象的原型链上，所以子类可以直接调用父类的方法</p>
<p>但是父类的属性不会直接继承到自身，可能会通过构造方法获得跟父类类似的属性</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;</span><br><span class="line">    <span class="comment">// 定义成员变量</span></span><br><span class="line">    #name;</span><br><span class="line">    #age;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name, age</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.#name = name;</span><br><span class="line">        <span class="variable language_">this</span>.#age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">name</span>(<span class="params">name</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.#name=name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">name</span>()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.#name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">age</span>(<span class="params">age</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.#age = age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">age</span>()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.#age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Student</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Person</span>&#123;</span><br><span class="line">    #score;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">name,age,score</span>)&#123;</span><br><span class="line">        <span class="comment">// 调用父类构造器</span></span><br><span class="line">        <span class="variable language_">super</span>(name, age);</span><br><span class="line">        <span class="variable language_">this</span>.#score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">set</span> <span class="title function_">score</span>(<span class="params">score</span>)&#123;</span><br><span class="line">        <span class="variable language_">this</span>.#score = score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> <span class="title function_">score</span>()&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">this</span>.#score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">good</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.age&#125;</span>岁的<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span>考了<span class="subst">$&#123;<span class="variable language_">this</span>.score&#125;</span>分`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> <span class="title class_">Student</span>(<span class="string">&quot;李四&quot;</span>,<span class="number">15</span>,<span class="number">99</span>)</span><br><span class="line"><span class="comment">// 15岁的李四考了99分</span></span><br><span class="line">s.<span class="title function_">good</span>();</span><br></pre></td></tr></table></figure>

<h1 id="对象拷贝"><a href="#对象拷贝" class="headerlink" title="对象拷贝"></a>对象拷贝</h1><h2 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h2><p>就是传地址，两个变量指向一个对象</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = arr1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">15</span>)</span><br><span class="line"><span class="keyword">let</span> p2 = p1</span><br></pre></td></tr></table></figure>

<h2 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h2><p>可通过解构表达式</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>];</span><br><span class="line"><span class="keyword">let</span> arr2 = [...arr1];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">15</span>)</span><br><span class="line"><span class="keyword">let</span> p2 = &#123;...p1&#125;;</span><br></pre></td></tr></table></figure>

<p>如过是对象，可通过json序列化和反序列化</p>
<p>会丢失私有属性、方法等</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> p1 = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&quot;张三&quot;</span>,<span class="number">15</span>)</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(p1));</span><br></pre></td></tr></table></figure>

<h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><h2 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// * 代表Math.js中的所有资源</span></span><br><span class="line"><span class="comment">// 无论何种方式导入，导入的内容都会被当成一个对象处理</span></span><br><span class="line"><span class="comment">// 所以要用as指定一个对象来接收</span></span><br><span class="line"><span class="comment">// 调用时需要如 math.add()</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> math <span class="keyword">from</span> <span class="string">&#x27;./Math.js&#x27;</span>;</span><br><span class="line"><span class="comment">// 或者使用解构表达式</span></span><br><span class="line"><span class="comment">// 调用时直接 add()</span></span><br><span class="line"><span class="keyword">import</span> &#123;add,diff&#125; <span class="keyword">from</span> <span class="string">&#x27;./Math.js&#x27;</span>;</span><br><span class="line"><span class="comment">// 解构表达式里可以起别名</span></span><br><span class="line"><span class="comment">// 调用时 ad()</span></span><br><span class="line"><span class="keyword">import</span> &#123;add <span class="keyword">as</span> ad,diff&#125; <span class="keyword">from</span> <span class="string">&#x27;./Math.js&#x27;</span>;</span><br><span class="line"><span class="comment">// 解构表达式里可以导入多次，一次起别名，一次原名</span></span><br><span class="line"><span class="comment">// 调用时 ad() add()都可以</span></span><br><span class="line"><span class="keyword">import</span> &#123;add, add <span class="keyword">as</span> ad,diff&#125; <span class="keyword">from</span> <span class="string">&#x27;./Math.js&#x27;</span>;</span><br><span class="line"><span class="comment">// 默认导出的导入方式 start</span></span><br><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> math <span class="keyword">from</span> <span class="string">&#x27;./Math.js&#x27;</span>;</span><br><span class="line">math.<span class="property">default</span> or math.<span class="title function_">default</span>()</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="keyword">default</span> <span class="keyword">as</span> add&#125; <span class="keyword">from</span> <span class="string">&#x27;./Math.js&#x27;</span>;</span><br><span class="line"><span class="comment">// or</span></span><br><span class="line"><span class="keyword">import</span> add <span class="keyword">from</span> <span class="string">&#x27;./Math.js&#x27;</span>;</span><br><span class="line"><span class="comment">// 默认导出的导入方式 end</span></span><br></pre></td></tr></table></figure>

<p>html以模块的方式引入js文件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="分别导出"><a href="#分别导出" class="headerlink" title="分别导出"></a>分别导出</h2><p>在想要暴露的属性之前添加export关键字</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> <span class="title class_">Person</span>&#123;&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="统一导出"><a href="#统一导出" class="headerlink" title="统一导出"></a>统一导出</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params"></span>)&#123;&#125;;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">export</span>&#123;add,<span class="title class_">Person</span>&#125;</span><br></pre></td></tr></table></figure>

<h2 id="默认导出"><a href="#默认导出" class="headerlink" title="默认导出"></a>默认导出</h2><p>指定引入某个js文件时默认引入的对象，默认导出只能有一个</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span>&#123;&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Person</span></span><br></pre></td></tr></table></figure>

<h1 id="动态对象属性key"><a href="#动态对象属性key" class="headerlink" title="动态对象属性key"></a>动态对象属性key</h1><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">    <span class="attr">username</span>: <span class="string">&quot;john&quot;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&quot;password&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&quot;username&quot;</span></span><br><span class="line">user[key] = <span class="string">&quot;jane&quot;</span></span><br><span class="line"><span class="keyword">const</span> newUser = &#123;[key]:<span class="string">&quot;zs&quot;</span>&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user)</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(newUser)</span><br></pre></td></tr></table></figure>

<h1 id="函数柯里化"><a href="#函数柯里化" class="headerlink" title="函数柯里化"></a>函数柯里化</h1><p>一个函数的返回值是一个函数</p>
<h1 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h1><p><strong>回调函数</strong></p>
<p>回调函数是基于事件的自动调用函数，其他的代码不会等待回调函数执行完毕才向下走，所以回调函数的执行是异步的。</p>
<p>回调函数是一种未来会执行的函数，回调函数以外的其他代码不会等这个函数的执行结果就会执行下去</p>
<p>回调函数相当于一种”承诺“，其从提出后有三种状态</p>
<ul>
<li>进行中</li>
<li>兑现（成功）</li>
<li>失败</li>
</ul>
<p>针对承诺的三种状态要执行三种预案</p>
<h2 id="什么是promise"><a href="#什么是promise" class="headerlink" title="什么是promise"></a>什么是promise</h2><p>promise是异步编程的一种解决方案，比传统的解决方案（回调函数和事件）更加强大，ES6原生提供了Promise对象。Promise类似于一个容器，其中保存着某个未来才会结束的事件（通常是一个异步操作）的结果</p>
<p>有三种状态：</p>
<ul>
<li>Pending 进行中</li>
<li>Resolved 已完成</li>
<li>Rejected 已失败</li>
</ul>
<p>只有其异步操作的结果可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。</p>
<p>一旦状态改变就不会再改变。任何时候都可以得到这个结果，Promise的对象状态的改变，只有两种可能：Pending变为Resolved，或者从Pending变为Rejected，只要这两种情况发生，状态就凝固了，不会再改变了</p>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 里面的函数便是回调函数</span></span><br><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;);</span><br><span class="line"><span class="comment">// 回调函数可接收两个参数：resolve 和 reject </span></span><br><span class="line"><span class="comment">// 这两个参数其实是函数，在回调函数中调用可改变当前promise的状态</span></span><br><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;&#125;);</span><br><span class="line"><span class="comment">// then方法会在promise对象的状态发生改变后执行</span></span><br><span class="line"><span class="comment">// then中可以传入两个参数，分别为两个方法</span></span><br><span class="line"><span class="comment">// 第一个方法为状态转为resolved时会执行的函数</span></span><br><span class="line"><span class="comment">// 第二个方法为状态转为reject时会执行的代码</span></span><br><span class="line"><span class="comment">// promise中的函数会在promise被声明的时候便开始执行</span></span><br><span class="line"><span class="comment">// 而then方法会等待promise中的方法执行结束执行，then下方的方法不会等待then执行完成，但会等待promise代码执行完成（也就是说then是异步的，但promise中的方法不是？）</span></span><br><span class="line">promise.<span class="title function_">then</span>(</span><br><span class="line">    <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(resolve);</span><br><span class="line">    &#125;</span><br><span class="line">    ,<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(reject);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// resolve与reject函数可以传入参数作为消息，可以在then中的回调函数中接收</span></span><br><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve,reject</span>)&#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;success&quot;</span>);</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;fail&quot;</span>);</span><br><span class="line">&#125;);</span><br><span class="line">promise.<span class="title function_">then</span>(</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line">    ,<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// then方法会返回另一个Promise，其值为</span></span><br><span class="line"><span class="comment">// 如果成功函数中返回了非Promise值，则会将其包装为Promise作为then的返回</span></span><br><span class="line"><span class="comment">// 如果成功函数中返回了一个Promise对象，则then的返回值则为该Promise</span></span><br><span class="line"><span class="comment">// 如果成功函数中抛出了一个异常，则then会返回一个失败promise，失败原因为该异常</span></span><br><span class="line"><span class="comment">// 如果失败状态没有指定返回值，则then会返回一个封装为成功的Promise，其值为undefined</span></span><br><span class="line"><span class="comment">// 可调用该对象的catch函数</span></span><br><span class="line"><span class="comment">// catch函数当promise中的回调函数报错或promise状态为reject的时候执行</span></span><br><span class="line"><span class="comment">// 可接收一个参数，其值为回调函数中reject填入的值或者异常信息</span></span><br><span class="line"><span class="comment">// 所以如果有catch处理的话，then中的第二个方法可以去掉</span></span><br><span class="line"><span class="keyword">let</span> promise2 = promise.<span class="title function_">then</span>(</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line">promise2.<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 以上这些操作可以连写</span></span><br><span class="line">promise.<span class="title function_">then</span>(</span><br><span class="line">    <span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">    &#125;</span><br><span class="line">).<span class="title function_">catch</span>(<span class="keyword">function</span>(<span class="params">value</span>)&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(value);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="中断then链"><a href="#中断then链" class="headerlink" title="中断then链"></a>中断then链</h2><p>返回一个pending状态的promise用于终端then链处理</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;www.baidu.com&#x27;</span>).<span class="title function_">then</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这一步只能证明连接服务器成功了&#x27;</span>);</span><br><span class="line">    <span class="comment">// 返回一个 Promise 对象，该对象会在响应成功时解析为 JSON 对象，用于下面then的处理</span></span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;连接服务器失败&#x27;</span>, error);</span><br><span class="line">    <span class="comment">// 中断then链调用</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">).<span class="title function_">then</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器返回的数据&#x27;</span>, response);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器返回错误&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h2 id="async"><a href="#async" class="headerlink" title="async"></a>async</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">a</span>(<span class="params"></span>)&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 箭头方式</span></span><br><span class="line"><span class="keyword">let</span> <span class="title function_">a</span> = <span class="keyword">async</span> (<span class="params"></span>)=&gt;&#123;&#125;</span><br></pre></td></tr></table></figure>

<p>async 所标识的函数会被封装为返回结果是一个pomise对象的函数，async标识函数的方法体则是Promise对象声明时所接收的那个回调函数。</p>
<p>如果在a函数中返回结果，则该promise的状态会变为Resolved，返回的结果会放入resolve的参数中，</p>
<p>如果在a函数中抛出异常，则该promise的状态会变为Rejected，异常信息放入reject的参数中。</p>
<p>如果a函数return了一个promise对象，则该promise就是这个promise</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="title function_">a</span>();</span><br><span class="line">promise.<span class="title function_">then</span>().<span class="title function_">catch</span>()</span><br></pre></td></tr></table></figure>

<h2 id="await"><a href="#await" class="headerlink" title="await"></a>await</h2><p>用于快速获取promise对象在成功状态下的返回值，只能在async修饰的方法中使用</p>
<p>如果await操作的promise返回的是异常，则await操作会抛出异常</p>
<p>与await在同一个方法体中且在await后的代码会等待await执行结束</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(obj)</span><br><span class="line"><span class="comment">// res = obj</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">p</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fun</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">p</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fun</span>()</span><br></pre></td></tr></table></figure>

<p>使用await只能获取成功后的结果数据，那如何处理失败呢？答案是使用trycatch</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="title function_">a</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&quot;www.baidu.com&quot;</span>);</span><br><span class="line">        <span class="keyword">const</span> data = <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h1 id="fetch"><a href="#fetch" class="headerlink" title="fetch"></a>fetch</h1><p>兼容性不高，老版本浏览器有不兼容，与xhr无关</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;www.baidu.com&#x27;</span>).<span class="title function_">then</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这一步只能证明连接服务器成功了&#x27;</span>);</span><br><span class="line">    <span class="comment">// 返回一个 Promise 对象，该对象会在响应成功时解析为 JSON 对象，用于下面then的处理</span></span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span>&#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;连接服务器失败&#x27;</span>, error);</span><br><span class="line">    <span class="comment">// 中断then链调用</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">() =&gt;</span> &#123;&#125;);</span><br><span class="line">  &#125;</span><br><span class="line">).<span class="title function_">then</span>(</span><br><span class="line">  <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器返回的数据&#x27;</span>, response);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器返回错误&#x27;</span>, error);</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"><span class="comment">// 优化</span></span><br><span class="line"><span class="title function_">fetch</span>(<span class="string">&#x27;www.baidu.com&#x27;</span>).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;这一步只能证明连接服务器成功了&#x27;</span>);</span><br><span class="line">        <span class="comment">// 返回一个 Promise 对象，该对象会在响应成功时解析为 JSON 对象，用于下面then的处理</span></span><br><span class="line">        <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">    &#125;</span><br><span class="line">).<span class="title function_">then</span>(</span><br><span class="line">    <span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器返回的数据&#x27;</span>, response);</span><br><span class="line">    &#125;</span><br><span class="line">).<span class="title function_">catch</span>(</span><br><span class="line">    <span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;服务器连接失败&#x27;</span>, error);</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h1 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h1><p>用于发送请求</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install axios</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">let msg = ref(&quot;&quot;);</span><br><span class="line">function getMsg() &#123;</span><br><span class="line">  // 方法返回一个promise对象</span><br><span class="line">  axios(&#123;</span><br><span class="line">    // url</span><br><span class="line">    url: &quot;https://api.uomg.com/api/rand.qinghua?format=json&quot;,</span><br><span class="line">    // method</span><br><span class="line">    method: &quot;get&quot;,</span><br><span class="line">    // params会以键值对形式拼接到url后，</span><br><span class="line">    params: &#123;&#125;,</span><br><span class="line">    // data 会以json形式放入请求体</span><br><span class="line">    data: &#123;&#125;</span><br><span class="line">  &#125;)</span><br><span class="line">    .then((response) =&gt; &#123;</span><br><span class="line">      /**</span><br><span class="line">       * response的结构</span><br><span class="line">       * &#123;</span><br><span class="line">       *    data：服务端响应的数据，如果是个json数据，会自动转为对象</span><br><span class="line">       *    status：响应状态码</span><br><span class="line">       *    statusText：响应描述</span><br><span class="line">       *    headers：响应头</span><br><span class="line">       *    config：本次请求的配置信息</span><br><span class="line">       *    request：本次请求的XMLHttpRequest属性</span><br><span class="line">       * &#125;</span><br><span class="line">       */</span><br><span class="line">      console.log(response);</span><br><span class="line">      console.log(response.data.content)</span><br><span class="line">      msg.value = response.data.content;</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch((e) =&gt; &#123;</span><br><span class="line">      console.log(e);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; msg &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button @click=&quot;getMsg&quot;&gt;变&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>Object.assign(a,b)</strong></p>
<p>可将b中的属性赋予a对象，若a对象中已有，则覆盖，没有则创建</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">let data = reactive(&#123;&#125;);</span><br><span class="line">function getMsg() &#123;</span><br><span class="line">  // 方法返回一个promise对象</span><br><span class="line">  axios(&#123;</span><br><span class="line">    // url</span><br><span class="line">    url: &quot;https://api.uomg.com/api/rand.qinghua?format=json&quot;,</span><br><span class="line">    // method</span><br><span class="line">    method: &quot;get&quot;,</span><br><span class="line">    // params会以键值对形式拼接到url后，</span><br><span class="line">    params: &#123;&#125;,</span><br><span class="line">    // data 会以json形式放入请求体</span><br><span class="line">    data: &#123;&#125;</span><br><span class="line">  &#125;)</span><br><span class="line">    .then((response) =&gt; &#123;</span><br><span class="line">      /**</span><br><span class="line">       * response的结构</span><br><span class="line">       * &#123;</span><br><span class="line">       *    data：服务端响应的数据，如果是个json数据，会自动转为对象</span><br><span class="line">       *    status：响应状态码</span><br><span class="line">       *    statusText：响应描述</span><br><span class="line">       *    headers：响应头</span><br><span class="line">       *    config：本次请求的配置信息</span><br><span class="line">       *    request：本次请求的XMLHttpRequest属性</span><br><span class="line">       * &#125;</span><br><span class="line">       */</span><br><span class="line">      console.log(response);</span><br><span class="line">      console.log(response.data.content)</span><br><span class="line">      Object.assign(data,response.data)</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch((e) =&gt; &#123;</span><br><span class="line">      console.log(e);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; data.content &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button @click=&quot;getMsg&quot;&gt;变&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="简写"><a href="#简写" class="headerlink" title="简写"></a>简写</h2><p>由于await后的代码会等待await执行结束，则若在提交按钮绑定的方法中使用await获取数据，通过获取到的数据来判断当前方法应该返回的值是可行的，因为return会等待await的执行结果</p>
<p><strong>get</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">let showData = reactive(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">async function getMsg()&#123;</span><br><span class="line">  // axios.get(url,&#123;params,headers&#125;)</span><br><span class="line">  let promise = axios.get(&quot;https://api.uomg.com/api/rand.qinghua?format=json&quot;,&#123;</span><br><span class="line">    params:&#123;</span><br><span class="line">      name:&quot;zs&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">  let &#123;data&#125; = await promise;</span><br><span class="line">  Object.assign(showData,data)</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; showData.content &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button @click=&quot;getMsg&quot;&gt;变&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p><strong>post</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">let showData = reactive(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">async function getMsg() &#123;</span><br><span class="line">  // axios.get(url,&#123;params,headers&#125;)</span><br><span class="line">  let promise = axios.post(</span><br><span class="line">    &quot;https://api.uomg.com/api/rand.qinghua?format=json&quot;,</span><br><span class="line">    // 这个对象是请求体</span><br><span class="line">    &#123;</span><br><span class="line">      username: &quot;zs&quot;,</span><br><span class="line">      password: &quot;123456&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      params: &#123;</span><br><span class="line">        name: &quot;zs&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  let &#123; data &#125; = await promise;</span><br><span class="line">  Object.assign(showData, data);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; showData.content &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button @click=&quot;getMsg&quot;&gt;变&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h2><p>axios可通过creat方法生成一个实例，该实例有着与axios相似的方法调用，可在某具体js中生成该实例并将该实例暴露，且在js文件中给该实例添加拦截器，以下示例并没有单独抽离实例js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;script setup&gt;</span><br><span class="line">import &#123; ref, reactive &#125; from &quot;vue&quot;;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line"></span><br><span class="line">let showData = reactive(&#123;&#125;);</span><br><span class="line"></span><br><span class="line">async function getMsg() &#123;</span><br><span class="line">  // axios.get(url,&#123;params,headers&#125;)</span><br><span class="line">  /**</span><br><span class="line">   * baseURL 使用该实例发送的请求之前会拼接baseURL</span><br><span class="line">   * timeout 请求超时时间，毫秒单位</span><br><span class="line">   */</span><br><span class="line">  let axiosins = axios.create(&#123;</span><br><span class="line">    baseURL: &quot;https://api.uomg.com&quot;,</span><br><span class="line">    timeout: 10000,</span><br><span class="line">  &#125;);</span><br><span class="line">  // 设置请求拦截器，两个函数</span><br><span class="line">  axiosins.interceptors.request.use(</span><br><span class="line">    config =&gt; &#123;</span><br><span class="line">      // 设置请求的信息，比如请求头、体等，最后需要返回这个config</span><br><span class="line">      // config.headers.Accept=&quot;application/json,123&quot;</span><br><span class="line">      return config;</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">      // 请求错误拦截，需要返回一个失败的promise</span><br><span class="line">      return Promise.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  // 设置响应拦截器，两个函数</span><br><span class="line">  axiosins.interceptors.response.use(</span><br><span class="line">    response =&gt; &#123;</span><br><span class="line">      // 响应状态码为200时执行,response需要返回，否则没有响应</span><br><span class="line">      console.log(123)</span><br><span class="line">      return response</span><br><span class="line">    &#125;,</span><br><span class="line">    error =&gt; &#123;</span><br><span class="line">      // 其他状态码执行, 最后需要返回一个失败的promise</span><br><span class="line">      console.log(error)</span><br><span class="line">      return Promise.reject(error)</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">  let promise = axiosins.get(&quot;/api/rand.qinghua?format=json&quot;, &#123;</span><br><span class="line">    params: &#123;</span><br><span class="line">      name: &quot;zs&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;);</span><br><span class="line">  let &#123; data &#125; = await promise;</span><br><span class="line">  Object.assign(showData, data);</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;&#123;&#123; showData.content &#125;&#125;&lt;/h1&gt;</span><br><span class="line">    &lt;button @click=&quot;getMsg&quot;&gt;变&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h1 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h1><p>原因，浏览器当前请求的视图中的某个目标指向的地址与视图的地址不在同一个域。</p>
<ul>
<li>方法一：前端服务器发请求</li>
<li>方法二：先发送预检请求，用于检查目标服务器是否安全<ul>
<li>前端先发送一个option的预检请求（自动发送）</li>
<li>后端新增一个过滤器，如果收到的请求是预检请求，则拦截处理，正常请求则放行。在预检请求的响应头中设置是否允许跨域等的信息。</li>
</ul>
</li>
</ul>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ES6/">ES6</a></div><div class="post_share"><div class="social-share" data-image="/assets/img/tx.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/10/%E7%AC%94%E8%AE%B0/NodeJS&amp;NPM/NodeJS&amp;NPM/" title="NodeJS&amp;NPM"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">NodeJS&amp;NPM</div></div></a></div><div class="next-post pull-right"><a href="/2023/11/09/%E7%AC%94%E8%AE%B0/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0/%E8%B7%A8%E7%AB%99%E8%AF%B7%E6%B1%82%E4%BC%AA%E9%80%A0/" title="跨站请求伪造"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">跨站请求伪造</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/assets/img/tx.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Boranget</div><div class="author-info__description">整理的一些笔记和平时的一些经验</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">191</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">198</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Boranget"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">笔记分类是一些看书或者网课做的笔记，经验分类一般是平时碰到的问题或者折腾的一些小东西。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">介绍</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#let"><span class="toc-number">2.</span> <span class="toc-text">let</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#const"><span class="toc-number">3.</span> <span class="toc-text">const</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E6%9D%BF%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-number">4.</span> <span class="toc-text">模板字符串</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">5.</span> <span class="toc-text">解构表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E6%95%B0%E7%BB%84"><span class="toc-number">5.1.</span> <span class="toc-text">解构数组</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E5%AF%B9%E8%B1%A1"><span class="toc-number">5.2.</span> <span class="toc-text">解构对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BD%A2%E5%8F%82%E8%A7%A3%E6%9E%84"><span class="toc-number">5.3.</span> <span class="toc-text">形参解构</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">6.</span> <span class="toc-text">扩展运算符</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-number">7.</span> <span class="toc-text">箭头函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#this%E9%97%AE%E9%A2%98"><span class="toc-number">7.1.</span> <span class="toc-text">this问题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#rest"><span class="toc-number">8.</span> <span class="toc-text">rest</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#spread"><span class="toc-number">9.</span> <span class="toc-text">spread</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-number">10.</span> <span class="toc-text">面向对象的语法糖</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-number">10.1.</span> <span class="toc-text">类的定义</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BE%8B"><span class="toc-number">10.2.</span> <span class="toc-text">创建实例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E8%B5%8B%E5%80%BC"><span class="toc-number">10.3.</span> <span class="toc-text">给对象的属性赋值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95%E7%9A%84%E5%AE%9A%E4%B9%89%E6%96%B9%E5%BC%8F"><span class="toc-number">10.4.</span> <span class="toc-text">实例方法的定义方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="toc-number">10.5.</span> <span class="toc-text">调用实例方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-number">10.6.</span> <span class="toc-text">调用静态方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#get%E5%92%8Cset%E6%96%B9%E6%B3%95"><span class="toc-number">10.7.</span> <span class="toc-text">get和set方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#private%E5%B1%9E%E6%80%A7"><span class="toc-number">10.8.</span> <span class="toc-text">private属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%99%A8"><span class="toc-number">10.9.</span> <span class="toc-text">构造器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF"><span class="toc-number">10.10.</span> <span class="toc-text">继承</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E6%8B%B7%E8%B4%9D"><span class="toc-number">11.</span> <span class="toc-text">对象拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">11.1.</span> <span class="toc-text">浅拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">11.2.</span> <span class="toc-text">深拷贝</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%8C%96"><span class="toc-number">12.</span> <span class="toc-text">模块化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%BC%E5%85%A5"><span class="toc-number">12.1.</span> <span class="toc-text">导入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%86%E5%88%AB%E5%AF%BC%E5%87%BA"><span class="toc-number">12.2.</span> <span class="toc-text">分别导出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%9F%E4%B8%80%E5%AF%BC%E5%87%BA"><span class="toc-number">12.3.</span> <span class="toc-text">统一导出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%AF%BC%E5%87%BA"><span class="toc-number">12.4.</span> <span class="toc-text">默认导出</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7key"><span class="toc-number">13.</span> <span class="toc-text">动态对象属性key</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%9F%AF%E9%87%8C%E5%8C%96"><span class="toc-number">14.</span> <span class="toc-text">函数柯里化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#promise"><span class="toc-number">15.</span> <span class="toc-text">promise</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFpromise"><span class="toc-number">15.1.</span> <span class="toc-text">什么是promise</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">15.2.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%96%ADthen%E9%93%BE"><span class="toc-number">15.3.</span> <span class="toc-text">中断then链</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#async"><span class="toc-number">15.4.</span> <span class="toc-text">async</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#await"><span class="toc-number">15.5.</span> <span class="toc-text">await</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fetch"><span class="toc-number">16.</span> <span class="toc-text">fetch</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Axios"><span class="toc-number">17.</span> <span class="toc-text">Axios</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%86%99"><span class="toc-number">17.1.</span> <span class="toc-text">简写</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%A6%E6%88%AA%E5%99%A8"><span class="toc-number">17.2.</span> <span class="toc-text">拦截器</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B7%A8%E5%9F%9F"><span class="toc-number">18.</span> <span class="toc-text">跨域</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/21/%E7%AC%94%E8%AE%B0/%E7%BD%91%E7%BB%9C%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E5%8E%9F%E7%90%86/%E7%BD%91%E7%BB%9C%E6%97%B6%E9%97%B4%E5%90%8C%E6%AD%A5%E5%8E%9F%E7%90%86/" title="Resilience4j Circuit Breaker">Resilience4j Circuit Breaker</a><time datetime="2025-09-21T12:27:19.000Z" title="更新于 2025-09-21 20:27:19">2025-09-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/21/%E7%AC%94%E8%AE%B0/%E6%97%A0%E5%A4%B4%E6%B5%8F%E8%A7%88%E5%99%A8/%E6%97%A0%E5%A4%B4%E6%B5%8F%E8%A7%88%E5%99%A8/" title="无头浏览器">无头浏览器</a><time datetime="2025-09-21T05:56:19.000Z" title="更新于 2025-09-21 13:56:19">2025-09-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/21/%E7%AC%94%E8%AE%B0/Resilience4jCircuitBreaker/Resilience4jCircuitBreaker/" title="Resilience4j Circuit Breaker">Resilience4j Circuit Breaker</a><time datetime="2025-09-21T05:27:19.000Z" title="更新于 2025-09-21 13:27:19">2025-09-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/21/%E7%AC%94%E8%AE%B0/ELK/ELK/" title="ELK">ELK</a><time datetime="2025-09-21T04:56:19.000Z" title="更新于 2025-09-21 12:56:19">2025-09-21</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/09/21/%E7%AC%94%E8%AE%B0/SpringBootAdmin/SpringBootAdmin/" title="SpringBootAdmin">SpringBootAdmin</a><time datetime="2025-09-21T04:56:19.000Z" title="更新于 2025-09-21 12:56:19">2025-09-21</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2025 By Boranget</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>